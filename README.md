# Гравитационная симуляция

## Описание
Это программа на Python для симуляции гравитационного движения объектов, запускаемых из **пушки** или **рогатки**, с использованием физического движка Pymunk и визуализации через Pygame. Программа включает пользовательский интерфейс, созданный с помощью CustomTkinter, который позволяет настраивать параметры, такие как масса, радиус, гравитация, упругость, трение, начальная скорость, угол наклона и сопротивление воздуха. Поддерживаются два режима (пушка и рогатка), а также визуализация траекторий объектов и графиков зависимости скорости от времени и дальности полёта от угла наклона (в режиме пушки).

## Возможности
- **Два режима симуляции**:
  - **Пушка**: Запуск круглых объектов или статичных "кнопок" под заданным углом и скоростью с отслеживанием траектории и сбором данных о скорости и дальности.
  - **Рогатка**: Перетаскивание и запуск объектов (круг, квадрат, треугольник или статичная кнопка) для моделирования движения снаряда.
- **Настраиваемые параметры**:
  - Масса (1–100 кг)
  - Радиус (10–100 единиц)
  - Упругость (0–1)
  - Трение (0–1)
  - Гравитация (0–50 м/с²)
  - Начальная скорость (0–20 м/с, только в режиме пушки)
  - Угол наклона (0–90 градусов, только в режиме пушки)
  - Сопротивление воздуха (0–10, только в режиме пушки)
- **Типы объектов**: Круг, квадрат, треугольник или статичная кнопка (квадрат и треугольник недоступны в режиме пушки).
- **Визуализация**:
  - Отображение движения объектов и траекторий в реальном времени.
  - Опциональный эффект изменения цвета для динамических объектов.
  - Графики зависимости скорости от времени и дальности от угла наклона (только в режиме пушки, отображаются с помощью Matplotlib).
- **Темы интерфейса**: Поддержка светлой и тёмной тем для интерфейса и окна симуляции.
- **Управление**:
  - Очистка поля симуляции.
  - Сброс параметров до значений по умолчанию.
  - Переключение эффекта цвета и темы.

## Требования
- Python 3.8 или выше
- Необходимые библиотеки Python:
  - `pygame` (для визуализации)
  - `pymunk` (для физической симуляции)
  - `customtkinter` (для пользовательского интерфейса)
  - `matplotlib` (для построения графиков)

## Установка
1. Склонируйте или скачайте репозиторий на локальный компьютер.
2. Убедитесь, что установлен Python 3.8 или выше.
3. Установите необходимые зависимости, выполнив:
   ```bash
   pip install pygame pymunk customtkinter matplotlib
   ```
4. Разместите все предоставленные Python-файлы (`main.py`, `physics_world.py`, `cannon.py`, `slingshot.py`, `graphics.py`, `ui.py`, `visualization.py`, `config.py`) в одной директории.

## Использование
1. Запустите программу, выполнив:
   ```bash
   python main.py
   ```
2. Окно симуляции (Pygame) и окно настроек (CustomTkinter) откроются рядом.
3. **Управление симуляцией**:
   - **Режим пушки**:
     - Щёлкните и отпустите левую кнопку мыши для выстрела круглым объектом или размещения статичной кнопки (если выбрана).
     - Настройте угол и скорость с помощью ползунков или текстовых полей в интерфейсе.
   - **Режим рогатки**:
     - Зажмите левую кнопку мыши, перетащите и отпустите для запуска объекта (круг, квадрат, треугольник или статичная кнопка).
   - Используйте интерфейс для переключения режимов, выбора форм, включения эффекта цвета или смены темы.
4. **Управление интерфейсом**:
   - Настраивайте параметры с помощью ползунков или вводите значения в текстовые поля (нажмите Enter для подтверждения).
   - Нажмите "Очистить поле" для удаления всех объектов, кроме границ.
   - Нажмите "Сброс настроек" для возврата параметров к значениям по умолчанию.
   - В режиме пушки нажмите "График скорости" или "График дальности" для отображения соответствующих графиков.
5. Закройте окно настроек для выхода из программы.

## Структура файлов
- `main.py`: Точка входа, инициализирует Pygame, физику и интерфейс, запускает цикл симуляции.
- `physics_world.py`: Управляет физическим миром Pymunk, границами и созданием объектов.
- `cannon.py`: Реализует функциональность пушки, включая выстрелы, отслеживание траектории и обработку столкновений.
- `slingshot.py`: Реализует функциональность рогатки для перетаскивания и запуска объектов.
- `graphics.py`: Отвечает за отрисовку объектов, границ и траекторий с помощью Pygame.
- `ui.py`: Создаёт интерфейс CustomTkinter для настройки параметров и выбора режимов/форм.
- `visualization.py`: Генерирует графики Matplotlib для зависимости скорости от времени и дальности от угла наклона (режим пушки).
- `config.py`: Хранит конфигурационные переменные и настройки по умолчанию.

## Примечания
- В симуляции используется система координат, где 100 пикселей = 1 метр.
- В режиме пушки упругость и трение фиксированы на значениях по умолчанию (0.8 и 0.2 соответственно).
- В режиме рогатки скорость, угол и сопротивление воздуха не настраиваются через интерфейс, так как определяются механикой перетаскивания.
- Графики доступны только в режиме пушки и требуют данных от произведённых выстрелов.
- Эффект цвета изменяет оттенок динамических объектов со временем для визуального эффекта.

## Ограничения
- Программа предполагает наличие графической среды для работы Pygame и Matplotlib.
- Квадрат и треугольник недоступны в режиме пушки для согласованности с движением снаряда.
- Большие значения массы, радиуса или гравитации могут вызвать непредсказуемое поведение в физической симуляции.

## Лицензия
Проект предоставляется как есть для образовательных целей. Специальная лицензия не применяется.

## Контакты
Для сообщений об ошибках или предложений свяжитесь с разработчиком или создайте запрос в репозитории (если применимо).